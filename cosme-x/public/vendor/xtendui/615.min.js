/*! For license information please see 615.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkxtendui=globalThis.webpackChunkxtendui||[]).push([[615],{615:(e,t,n)=>{n.r(t),n.d(t,{ToggleInit:()=>i});n(2368),n(381),n(1576),n(1034),n(2399);var s=n(631),o=n(2415);s.Xt.focusTrap=o;class i{_init(){this._initVars(),this._initLogic()}_initVars(){const e=this;e._optionsDefault=s.Xt.merge([e.constructor.optionsDefaultSuper,e.constructor.optionsDefault]),e._optionsDefault=s.Xt.merge([e._optionsDefault,s.Xt.options[e.componentName]]),e._optionsInitial=e.options=s.Xt.merge([e._optionsDefault,e._optionsCustom]);const t=e.options;e._classes=t.class?t.class.split(" "):[],e._classesIn=t.classIn?t.classIn.split(" "):[],e._classesOut=t.classOut?t.classOut.split(" "):[],e._classesDone=t.classDone?t.classDone.split(" "):[],e._classesInitial=t.classInitial?t.classInitial.split(" "):[],e._classesBefore=t.classBefore?t.classBefore.split(" "):[],e._classesAfter=t.classAfter?t.classAfter.split(" "):[]}_initLogic(){let{save:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;t._destroyElements=[document,window,t.container],t.enable(),t._initSetup(),s.Xt._initMatches({self:t,optionsInitial:t._optionsInitial}),t._initScope(),t._initEvents(),t._initA11y(),t._initStart({save:e}),(t.options.disabled||t._disabledManual)&&t.disable()}_initSetup(){const e=this,t=e.options;e._containerTargets=e.container,t.targets&&-1!==t.targets.indexOf("#")?(e._mode="unique",e._containerTargets=document.documentElement,e.ns=`${e.componentName}-${t.targets.toString()}-${e._classes.toString()}`):(e._mode="multiple",e.ns=e.ns??s.Xt.uniqueId()),e.ns=e.ns.replace(/^[^a-z]+|[ ,#_:.-]+/gi,""),e._addNamespace(),e._setCurrents([])}_initScope(){this._initScopeElements(),this._initScopeTargets()}_initScopeElements(){const e=this,t=e.options;if(e._containerElements=e.container,t.elements){-1!==t.elements.indexOf("#")&&(e._containerElements=document.documentElement);let n=Array.from(e._containerElements.querySelectorAll(t.elements));t.exclude&&(n=n.filter((e=>!e.matches(t.exclude)))),e.elements=n,e._destroyElements.push(...e.elements)}if(e.elements.length||(e.elements=[e.container]),t.elementsInner)for(const n of e.elements){const o=s.Xt.queryAll({els:n,query:t.elementsInner});s.Xt.dataStorage.set(n,`elementsInner/${e.ns}`,o)}}_initScopeTargets(){const e=this,t=e.options;if(t.targets){let n=Array.from(e._containerTargets.querySelectorAll(t.targets));if(t.exclude&&(n=n.filter((e=>!e.matches(t.exclude)))),e.targets=n,e._destroyElements.push(...e.targets),t.targetsInner)for(const n of e.targets){const o=s.Xt.queryAll({els:n,query:t.targetsInner});s.Xt.dataStorage.set(n,`targetsInner/${e.ns}`,o)}}}_initStart(){let{save:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options;t._setCurrents([]);let o=0;t.initial=!0,t.index=null,t._oldIndex=null,s.Xt._running[t.ns]=[],o=t._initActivate({save:e});let i=n.min-o;if(i>0){o+=i;for(let e=0;e<i;e++){const s=t.elements[e];if(!s||s.classList.contains(t._classes)||s.checked)i<t.elements.length&&i++;else if(n.on){const e=n.on.split(" ")[0];t._getEventParent({el:s,event:e}).dispatchEvent(new CustomEvent(e,{detail:{force:!0}}))}else t._eventOn({el:s,force:!0})}}e&&(t._initialCurrents=t._getCurrents().slice(0)),0===o&&(t.container.dispatchEvent(new CustomEvent(`setup.${t._componentNs}`)),s.Xt.frameDouble({el:t.container,ns:`${t.ns}Init`,func:()=>{t.container.setAttribute(`data-${t.componentName}-init`,""),t.container.dispatchEvent(new CustomEvent(`init.${t._componentNs}`)),t._eventAutostart(),t.initial=!1,n.debug&&console.debug(`${t.componentName} init`,t)}}))}_initActivate(){let{save:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options,o=e=>{for(const n of t._classes)if(e.classList.contains(n)||e.checked)return!0;return!1},i=t._hashChange({save:e});let a=i.currents??0;for(const l of t.getElementsGroups()){let r=!1;if(e?!0===n.classSkip||n.classSkip.elements||(r=o(l)):t._initialCurrents.includes(l)&&(r=!0),r&&a<n.max||i.arr.includes(l))l.classList.add(...t._classes),l.classList.add(...t._classesIn),l.classList.add(...t._classesInitial);else{if(!0!==n.classSkip&&!n.classSkip.elements){const e=t.getElements({el:l});for(const n of e)n.classList.remove(...t._classes,...t._classesIn,...t._classesOut,...t._classesDone,...t._classesInitial,...t._classesBefore,...t._classesAfter)}if(n.elementsInner&&!0!==n.classSkip&&!n.classSkip.elementsInner){const e=s.Xt.dataStorage.get(l,`elementsInner/${t.ns}`);for(const n of e)n.classList.remove(...t._classes,...t._classesIn,...t._classesOut,...t._classesDone,...t._classesInitial,...t._classesBefore,...t._classesAfter)}}const c=t.getTargets({el:l});for(const l of c){e&&!r&&(!0===n.classSkip||n.classSkip.targets||(r=o(l)));const c=t.getElements({el:l,same:!0});if(r&&a<n.max||i.arr.some((e=>c.includes(e))))l.classList.add(...t._classes),l.classList.add(...t._classesIn),l.classList.add(...t._classesInitial);else if(!0===n.classSkip||n.classSkip.targets||l.classList.remove(...t._classes,...t._classesIn,...t._classesOut,...t._classesDone,...t._classesInitial,...t._classesBefore,...t._classesAfter),n.targetsInner&&!0!==n.classSkip&&!n.classSkip.targetsInner){const e=s.Xt.dataStorage.get(l,`targetsInner/${t.ns}`);for(const n of e)n.classList.remove(...t._classes,...t._classesIn,...t._classesOut,...t._classesDone,...t._classesInitial,...t._classesBefore,...t._classesAfter)}}if(r&&a<n.max)if(a++,i.arr.push(l),n.on){const e=n.on.split(" ")[0];t._getEventParent({el:l,event:e}).dispatchEvent(new CustomEvent(e,{detail:{force:!0}}))}else t._eventOn({el:l,force:!0})}return a}_initEvents(){const e=this,t=e.options;e._removeEvents();for(const n of e.elements){const o=s.Xt.dataStorage.put(n,`${t.on}/oncustom/${e.ns}`,e._eventOnHandler.bind(e,{el:n,force:!0}));if(n.addEventListener(`on.trigger.${e._componentNs}`,o),t.on){const o=t.on.split(" ");for(const i of o){const o=e._getEventParent({el:n,event:i});o!==n&&e._destroyElements.push(o);const a=s.Xt.dataStorage.put(o,`${t.on}/on/${e.ns}`,e._eventOnHandler.bind(e,{el:n}));o.addEventListener(i,a)}}const i=s.Xt.dataStorage.put(n,`${t.off}/offcustom/${e.ns}`,e._eventOffHandler.bind(e,{el:n,force:!0}));if(n.addEventListener(`off.trigger.${e._componentNs}`,i),t.off){const o=t.off.split(" ");for(const i of o)if(!t.on.split(" ").includes(i)){const o=e._getEventParent({el:n,event:i});o!==n&&e._destroyElements.push(o);const a=s.Xt.dataStorage.put(o,`${t.off}/off/${e.ns}`,e._eventOffHandler.bind(e,{el:n}));o.addEventListener(i,a)}}if(t.on){if(t.preventEvent){const o=t.on.split(" ");if(o.includes("click")||o.includes("mouseenter")||o.includes("mousehover")){const t=s.Xt.dataStorage.put(n,`touchend/preventevent/${e.ns}`,e._eventPreventeventStartHandler.bind(e,{el:n}));n.addEventListener("touchend",t)}if(o.includes("click")){const t=s.Xt.dataStorage.put(n,`mouseup keyup/preventevent/${e.ns}`,e._eventPreventeventStartHandler.bind(e,{el:n}));n.addEventListener("mouseup",t),n.addEventListener("keyup",t)}}s.Xt.dataStorage.put(n,`active/preventevent/${e.ns}`,e.hasCurrent({el:n}))}}let n=!1;if("unique"===e._mode){s.Xt.dataStorage.get(document.documentElement,`xtNamespace${e.ns}`).length>1&&(n=!0)}if(!n)for(const n of e.targets){const o=s.Xt.dataStorage.put(n,`${t.on}/oncustom/${e.ns}`,e._eventOnHandler.bind(e,{el:n,force:!0}));n.addEventListener(`on.trigger.${e._componentNs}`,o);const i=s.Xt.dataStorage.put(n,`${t.off}/offcustom/${e.ns}`,e._eventOffHandler.bind(e,{el:n,force:!0}));n.addEventListener(`off.trigger.${e._componentNs}`,i)}if(t.auto&&t.auto.time){const n=s.Xt.dataStorage.put(e.container,`autostart/${e.ns}`,e._eventAutostart.bind(e)),o=s.Xt.dataStorage.put(e.container,`autostop/${e.ns}`,e._eventAutostop.bind(e)),i=s.Xt.dataStorage.set(window,`focus/auto/${e.ns}`,n);addEventListener("focus",i);const a=s.Xt.dataStorage.set(window,`blur/auto/${e.ns}`,o);if(addEventListener("blur",a),e.container.addEventListener(`autostart.trigger.${e._componentNs}`,n),e.container.addEventListener(`autostop.trigger.${e._componentNs}`,o),t.auto.pause){const n=e.container.querySelectorAll(t.auto.pause);if(n.length){e._destroyElements.push(...n);for(const t of n){const n=s.Xt.dataStorage.put(t,`mouseenter focus/auto/${e.ns}`,e._eventAutostop.bind(e)),o=["mouseenter","focus"];for(const e of o)t.addEventListener(e,n);const i=s.Xt.dataStorage.put(t,`mouseleave blur/auto/${e.ns}`,e._eventAutostart.bind(e)),a=["mouseleave","blur"];for(const e of a)t.addEventListener(e,i)}}}}if(t.hash){for(const n of e.elements)if(n.getAttribute(t.hash)){e._hasHash=!0;break}if(!e._hasHash)for(const n of e.targets)if(n.getAttribute(t.hash)){e._hasHash=!0;break}}if(e._hasHash){const t=s.Xt.dataStorage.put(window,`popstate/${e.ns}`,e._hashChange.bind(e).bind(e,{save:!0}));addEventListener("popstate",t)}if(t.jump)for(const t of e.targets){const n=s.Xt.dataStorage.put(t,`click/jump/${e.ns}`,e._eventJumpHandler.bind(e).bind(e,{el:t}));t.addEventListener("click",n,!0),e.disabled||t.classList.add("xt-jump")}if(t.navigation&&(e.navs=e.container.querySelectorAll(t.navigation),e.navs.length)){e._destroyElements.push(...e.navs);for(const t of e.navs){const n=s.Xt.dataStorage.put(t,`click/nav/${e.ns}`,e._eventNavHandler.bind(e).bind(e,{el:t}));t.addEventListener("click",n)}}if(t.closeauto){const t=s.Xt.dataStorage.set(window,`closeauto.trigger.xt/${e.ns}`,e._eventCloseautoHandler.bind(e));addEventListener("closeauto.trigger.xt",t,!0)}if(t.openauto){const t=s.Xt.dataStorage.set(window,`openauto.trigger.xt/${e.ns}`,e._eventOpenautoHandler.bind(e));addEventListener("openauto.trigger.xt",t,!0)}if(t.mediaLoaded||t.mediaLoadedReinit){for(const t of e.elements){const n=Array.from(t.querySelectorAll("img"));e._destroyElements.push(...n);for(const o of n)if(!s.Xt.dataStorage.get(o,`${e.ns}MedialoadedDone`))if(o.complete)e._eventMedialoadedHandler({img:o,el:t});else{const n=s.Xt.dataStorage.put(o,`load/media/${e.ns}`,e._eventMedialoadedHandler.bind(e).bind(e,{img:o,el:t,deferred:!0}));o.addEventListener("load",n)}}for(const t of e.targets){const n=Array.from(t.querySelectorAll("img"));e._destroyElements.push(...n);for(const o of n)if(!s.Xt.dataStorage.get(o,`${e.ns}MedialoadedDone`))if(o.complete)e._eventMedialoadedHandler({img:o,el:t});else{const n=s.Xt.dataStorage.put(o,`load/media/${e.ns}`,e._eventMedialoadedHandler.bind(e).bind(e,{img:o,el:t,deferred:!0,reinit:!0}));o.addEventListener("load",n)}}}t.visibleReinit&&(s.Xt.visible({el:e.container})||(e._observer=new IntersectionObserver(((t,n)=>{for(const s of t)s.intersectionRatio>0&&(e._eventVisibleReinit(),n.disconnect(),e._observer=null)}),{root:null}),e._observer.observe(e.container)))}_eventOnHandler(e,t){var n;let{el:o,force:i=!1}=e;const a=this,l=a.options;if(i=i||(null==t||null===(n=t.detail)||void 0===n?void 0:n.force),o=l.groupElements||a.targets.includes(o)?a.getElements({el:o})[0]:o,!i&&l.eventLimit){const e=a._containerElements.querySelectorAll(l.eventLimit);if(a._containerElements.matches(l.eventLimit))return;if(e.length&&s.Xt.contains({els:e,tr:t.target}))return}a._eventOn({el:o,force:i},t)}_eventOffHandler(e,t){var n;let{el:o,force:i=!1}=e;const a=this,l=a.options;if(i=i||(null==t||null===(n=t.detail)||void 0===n?void 0:n.force),o=l.groupElements||a.targets.includes(o)?a.getElements({el:o})[0]:o,!i&&l.eventLimit){const e=a._containerElements.querySelectorAll(l.eventLimit);if(a._containerElements.matches(l.eventLimit))return;if(e.length&&s.Xt.contains({els:e,tr:t.target}))return}a._eventOff({el:o,force:i},t)}_eventPreventeventStartHandler(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;s.Xt.dataStorage.put(e,`active/preventevent/${t.ns}`,t.hasCurrent({el:e}));const n=s.Xt.dataStorage.put(e,`click keypress/preventevent/${t.ns}`,t._eventPreventeventHandler.bind(t,{el:e}));e.addEventListener("click",n),e.addEventListener("keypress",n);const o=s.Xt.dataStorage.put(e,`off/preventevent/${t.ns}`,t._eventPreventeventResetHandler.bind(t,{el:e}));e.addEventListener(`off.${t._componentNs}`,o)}_eventPreventeventEndHandler(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=s.Xt.dataStorage.get(e,`click/preventevent/${t.ns}`);e.removeEventListener("click",n);const o=s.Xt.dataStorage.get(e,`off/preventevent/${t.ns}`);e.removeEventListener(`off.${t._componentNs}`,o)}_eventPreventeventHandler(e,t){let{el:n}=e;const o=this,i=s.Xt.dataStorage.get(n,`active/preventevent/${o.ns}`);t.key&&"Enter"!==t.key||(i||s.Xt.dataStorage.get(n,`${o.ns}PreventeventDone`)?(o._eventPreventeventEndHandler({el:n}),s.Xt.dataStorage.remove(n,`${o.ns}PreventeventDone`),s.Xt.dataStorage.remove(n,`active/preventevent/${o.ns}`)):(s.Xt.dataStorage.set(n,`${o.ns}PreventeventDone`,!0),t.preventDefault()))}_eventPreventeventResetHandler(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;t._eventPreventeventEndHandler({el:e}),s.Xt.dataStorage.remove(e,`${t.ns}PreventeventDone`),s.Xt.dataStorage.remove(e,`active/preventevent/${t.ns}`)}_hashChange(){let{save:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options;let o=0;const i=[];if(t.disabled)return{currents:o,arr:i};if(t._hasHash&&!s.Xt.dataStorage.get(t.container,`${t.ns}HashSkip`)){const a=decodeURI(location.hash.split("#")[1]);if(a){const l=(e,t)=>e.getAttribute(n.hash)===t;for(const r of t.elements){let c=!1;e&&(c=l(r,a));const u=t.getTargets({el:r});for(const t of u)e&&!c&&(c=l(t,a));if(c&&o<n.max){if(o++,i.push(r),s.Xt.dataStorage.set(t.container,`${t.ns}HashSkip`,!0),n.on){const e=n.on.split(" ")[0];r.dispatchEvent(new CustomEvent(e,{detail:{force:!0}}))}else t._eventOn({el:r,force:!0});s.Xt.dataStorage.set(t.container,`${t.ns}HashSkip`,!1)}}}}return{currents:o,arr:i}}_eventJumpHandler(e,t){let{el:n}=e;const s=this;s.disabled||s.targets.includes(n)&&s._eventJump({el:n},t)}_eventNavHandler(e,t){let{el:n}=e;this._eventNav({el:n},t)}_eventCloseautoHandler(e){var t,n;const s=this;if(null==e||null===(t=e.detail)||void 0===t||!t.container||null!=e&&null!==(n=e.detail)&&void 0!==n&&n.container.contains(s.container)){const t=s._getCurrents();for(const n of t)s._eventOff({el:n,force:!0},e)}}_eventOpenautoHandler(e){const t=this;let n;for(const s of Array.from(t.elements).filter((t=>t.contains(e.target)))){n=s;break}if(!n)for(const s of Array.from(t.targets).filter((t=>t.contains(e.target)))){n=s;break}n&&t._eventOn({el:n},e)}_eventMedialoadedHandler(){let{img:e,el:t,deferred:n=!1,reinit:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this,a=i.options;s.Xt.dataStorage.set(e,`${i.ns}MedialoadedDone`,!0);const l=s.Xt.dataStorage.get(e,`load/media/${i.ns}`);e.removeEventListener("load",l),a.mediaLoadedReinit&&n&&o&&(clearTimeout(s.Xt.dataStorage.get(i.container,`${i.ns}MedialoadedTimeout`)),s.Xt.dataStorage.set(i.container,`${i.ns}MedialoadedTimeout`,setTimeout((()=>{i._eventMediaLoadedReinit()}),s.Xt.medialoadedDelay))),a.mediaLoaded&&t.classList.add("xt-medialoaded"),t.dispatchEvent(new CustomEvent(`medialoaded.${i._componentNs}`,{detail:{deferred:n}}))}getElementsGroups(){const e=this,t=[];for(const n of e.elements){const e=n.getAttribute("data-xt-group");if(e){t.filter((t=>t.getAttribute("data-xt-group")===e)).length||t.push(n)}else t.push(n)}return t}_groupFilter(){let{els:e,attr:t,some:n=!1,same:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this.options,i=[];for(const l of e){let e=l.getAttribute("data-xt-group");if(s){const t=l.getAttribute("data-xt-group-same");t&&(e+=o.groupSeparator+t)}if(e!==t){if(n){var a;const n=null==t?void 0:t.split(o.groupSeparator).filter((e=>e)),s=null===(a=e)||void 0===a?void 0:a.split(o.groupSeparator).filter((e=>e));s&&n&&s.some((e=>n.includes(e)))&&i.push(l)}}else i.push(l)}return i}getElements(){let{el:e,same:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this,o=n.options;if(!n.elements||!n.elements.length)return[];if(!e)return[];if("unique"===n._mode){const e=[],t=s.Xt.dataStorage.get(document.documentElement,`xtNamespace${n.ns}`);if(t){for(const n of t)e.push(...n.elements);return e}return[]}if("multiple"===n._mode){let s,i=e.getAttribute("data-xt-group");if(t){const t=e.getAttribute("data-xt-group-same");t&&(i+=o.groupSeparator+t)}const a=!n.elements.includes(e),l=n._groupFilter({els:n.elements,attr:i,some:a,same:t}),r=n._groupFilter({els:n.targets,attr:i,some:a,same:t});if(i)s=l;else if(Array.from(n.elements).includes(e))s=[e].filter((e=>e));else{s=[l[r.findIndex((t=>t===e))]].filter((e=>e))}return s}}getTargets(){let{el:e,same:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this,s=n.options;if(!n.targets||!n.targets.length)return[];if(!e)return[];if("unique"===n._mode){return n.targets}if("multiple"===n._mode){let o,i=e.getAttribute("data-xt-group");if(t){const t=e.getAttribute("data-xt-group-same");t&&(i+=s.groupSeparator+t)}const a=!n.targets.includes(e),l=n._groupFilter({els:n.elements,attr:i,some:a,same:t}),r=n._groupFilter({els:n.targets,attr:i,some:a,same:t});if(i)o=r;else if(Array.from(n.targets).includes(e))o=[e].filter((e=>e));else{o=[r[l.findIndex((t=>t===e))]].filter((e=>e))}return o}}_getElementsInner(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;let n=[];if(t.options.elementsInner)for(const o of e){const e=s.Xt.dataStorage.get(o,`elementsInner/${t.ns}`);e.length&&(n=n.concat(e))}return n}_getTargetsInner(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;let n=[];if(t.options.targetsInner)for(const o of e){const e=s.Xt.dataStorage.get(o,`targetsInner/${t.ns}`);e.length&&(n=n.concat(e))}return n}_getEventParent(){let{el:e,event:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.options;return n.mouseParent&&["mouseenter","mouseleave","mousehover","mouseout"].includes(t)?"string"==typeof n.mouseParent?e.closest(n.mouseParent):e.parentNode:e}_getCurrents(){return s.Xt._currents[this.ns]}_setCurrents(e){s.Xt._currents[this.ns]=e}_addCurrent(){let{el:e,running:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this;if(!n.hasCurrent({el:e,running:t})){(t?s.Xt._running:s.Xt._currents)[n.ns].push(e)}}_removeCurrent(){let{el:e,running:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t?s.Xt._running:s.Xt._currents;n[this.ns]=n[this.ns].filter((t=>t!==e))}hasCurrent(){let{el:e,same:t=!1,running:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options.groupElements||o.targets.includes(e)?o.getElements({el:e,same:t}):[e];return(n?s.Xt._running:s.Xt._currents)[o.ns].filter((e=>i.includes(e))).length}_checkOn(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!this.hasCurrent({el:e})}_checkOff(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;return!(t.options.min-t._getCurrents().length>=0)&&t.hasCurrent({el:e})}_checkOnRunning(){let{obj:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.elements.runningOn||!this.hasCurrent({el:e.elements.queueEls[0],running:!0});return e.elements.runningOn=t,t}_checkOffRunning(){let{obj:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.elements.runningOff||this.hasCurrent({el:e.elements.queueEls[0],running:!0});return e.elements.runningOff=t,t}_setIndex(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.getIndex({el:e});t._oldIndex=t.index??n,t.index=n}getIndex(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;e=t.getElements({el:e})[0];let n=null;for(const[s,o]of t.getElementsGroups().entries())if(e===o){n=s;break}return n}_setDirection(){const e=this;null===e.index||e.index===e._oldIndex?e.direction=0:null!==e._inverse?e.direction=e._inverse?-1:1:e.direction=e.index<e._oldIndex?-1:1}_activate(){let{el:e,type:t,skipSame:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options;n||!0===i.classSkip||i.classSkip[t]||(e.checked=!0,e.classList.add(...o._classes),e.classList.remove(...o._classesOut),s.Xt.frameDouble({el:e,func:()=>{e.classList.add(...o._classesIn),e.classList.remove(...o._classesDone)}}),e.classList.remove(...o._classesBefore,...o._classesAfter),o.direction<0?e.classList.add(...o._classesBefore):o.direction>0&&e.classList.add(...o._classesAfter))}_activateDone(){let{el:e,type:t,skipSame:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options;n||!0===i.classSkip||i.classSkip[t]||(s.Xt.frameDouble({el:e}),e.classList.add(...o._classesIn,...o._classesDone))}_activateHash(){let{obj:e,el:t,type:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options;if(!s.Xt.dataStorage.get(o.container,`${o.ns}HashSkip`)&&o._hasHash&&!o.initial){const a=e.elements.queueEls[0];if("elements"===n&&o.getElements({el:a}).includes(t)||"targets"===n&&o.getTargets({el:a}).includes(t)){const e=t.getAttribute(i.hash);e&&s.Xt.frame({el:window,ns:`${o.ns}Hash`,func:()=>{s.Xt.dataStorage.set(o.container,`${o.ns}HashSkip`,!0),history.pushState({},"",`#${encodeURIComponent(e)}`),s.Xt.dataStorage.set(o.container,`${o.ns}HashSkip`,!1)}})}}}_deactivate(){let{el:e,type:t,skipSame:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options;n||!0===i.classSkip||i.classSkip[t]||(e.checked=!1,e.classList.remove(...o._classes),s.Xt.frameDouble({el:e,func:()=>{e.classList.remove(...o._classesIn,...o._classesDone),e.classList.add(...o._classesOut)}}),e.classList.remove(...o._classesBefore,...o._classesAfter),o.direction<0?e.classList.add(...o._classesBefore):o.direction>0&&e.classList.add(...o._classesAfter))}_deactivateDone(){let{el:e,type:t,skipSame:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options;n||!0===i.classSkip||i.classSkip[t]||(s.Xt.frameDouble({el:e}),e.classList.remove(...o._classesIn,...o._classesOut))}_deactivateHash(){let{obj:e,el:t,type:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options;if(!s.Xt.dataStorage.get(o.container,`${o.ns}HashSkip`)&&i.hash&&o._hasHash&&!o.initial){const a=e.elements.queueEls[0];if("elements"===n&&o.getElements({el:a}).includes(t)||"targets"===n&&o.getTargets({el:a}).includes(t)){const e=t.getAttribute(i.hash);e&&e===location.hash.split("#")[1]&&s.Xt.frame({el:window,ns:`${o.ns}Hash`,func:()=>{s.Xt.dataStorage.set(o.container,`${o.ns}HashSkip`,!0),history.pushState({},"","#"),s.Xt.dataStorage.set(o.container,`${o.ns}HashSkip`,!1)}})}}}_eventOn(e,t){var n;let{el:s,force:o=!1,focus:i=!1}=e;const a=this,l=a.options;if(o=o||(null==t||null===(n=t.detail)||void 0===n?void 0:n.force),a.disabled&&!o)return!1;if(o||a._checkOn({el:s})){a._eventAutostop();const e=l.groupElements||a.targets.includes(s)?a.getElements({el:s,same:!0}):[s];s=e[0];const n=a.getTargets({el:s,same:!0}),r=a._getElementsInner({els:e}),c=a._getTargetsInner({els:n});a._addCurrent({el:s}),a._setIndex({el:s}),a._setDirection();const u="In",d="Out";let f=a._eventQueue({elements:e,targets:n,elementsInner:r,targetsInner:c,force:o,e:t});const m=a._getCurrents();if(m.length>l.max){const e=a._eventOff({el:m[0],objFilter:f});!l.queue&&null!=e&&e.obj&&(f=e.obj)}l.queue?a[`_queue${u}`].unshift(f):a[`_queue${u}`]=[f];for(const e in a[`_queue${u}`][0])a._queueStart({actionCurrent:u,actionOther:d,type:e,index:0});return i&&(s=r[0]??s,s.focus()),!0}return l.off&&l.off.split(" ").includes(null==t?void 0:t.type)&&a._eventOff({el:s},t),!1}_eventOff(){var e;let{el:t,force:n=!1,focus:s=!1,objFilter:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const a=this,l=a.options;if(n=n||(null==i||null===(e=i.detail)||void 0===e?void 0:e.force),a.disabled&&!n)return!1;if(n||a._checkOff({el:t})){const e=l.groupElements||a.targets.includes(t)?a.getElements({el:t,same:!0}):[t];t=e[0],a._removeCurrent({el:t});const r=a.getTargets({el:t,same:!0}),c=a._getElementsInner({els:e}),u=a._getTargetsInner({els:r});a._getCurrents().length||a._eventAutostop();const d="Out",f="In",m=a._eventQueue({elements:e,targets:r,elementsInner:c,targetsInner:u,force:n,e:i});if(l.groupSame&&!l.queue&&o)for(const e in m){const t=m[e];if(t.queueEls){const n=o[e],s=t.queueEls.filter((e=>!n.queueEls.includes(e)));n.skipEls=n.queueEls.filter((e=>t.queueEls.includes(e))),t.queueEls=s}}if(l.queue?a[`_queue${d}`].unshift(m):a[`_queue${d}`]=[m],a[`_queue${d}`].length>l.max){const e=a[`_queue${f}`].shift();a._queueStop({actionCurrent:f,actionOther:d,obj:e});const t=a[`_queue${d}`].shift();a._queueStop({actionCurrent:d,actionOther:f,obj:t})}for(const e in a[`_queue${d}`][0])a._queueStart({actionCurrent:d,actionOther:f,type:e,index:0});return s&&(t=c[0]??t,t.focus()),!o||{obj:o}}return!1}_eventQueue(){let{elements:e,targets:t,elementsInner:n,targetsInner:s,force:o,e:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a={};return a.elements={queueEls:e,force:o,e:i},t.length&&(a.targets={queueEls:t}),n.length&&(a.elementsInner={queueEls:n}),s.length&&(a.targetsInner={queueEls:s}),a}_eventAuto(){const e=this,t=e.options;e.disabled||!e._autoblock&&e._autorunning&&s.Xt.visible({el:e.container})&&(t.auto.inverse?e.goToPrev({amount:t.auto.step,loop:t.auto.loop}):e.goToNext({amount:t.auto.step,loop:t.auto.loop}))}_eventAutostart(){const e=this,t=e.options;if(!e.disabled&&t.auto&&t.auto.time&&s.Xt.autoTimescale&&!e._autoblock&&!e._autorunning&&null!==e.index&&(!e.initial||t.auto.initial)){e._autorunning=!0,clearTimeout(s.Xt.dataStorage.get(e.container,`${e.ns}AutoTimeout`));const n=t.auto.time;if(e.disabled)return;s.Xt.dataStorage.set(e.container,`${e.ns}AutoTimeout`,setTimeout((()=>{e._eventAuto()}),n/s.Xt.autoTimescale)),e.container.dispatchEvent(new CustomEvent(`autostart.${e._componentNs}`))}}_eventAutostop(){const e=this,t=e.options;t.auto&&t.auto.time&&!e._autoblock&&e._autorunning&&(e._autorunning=!1,clearTimeout(s.Xt.dataStorage.get(e.container,`${e.ns}AutoTimeout`)),e.container.dispatchEvent(new CustomEvent(`autostop.${e._componentNs}`)))}_eventJump(e,t){let{el:n}=e;const s=this;s.disabled||!n.classList.contains(...s._classes)&&n.classList.contains("xt-jump")&&(t.preventDefault(),s._checkOn({el:n})&&s._eventOn({el:n}))}_eventNav(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;if(t.disabled)return;const n=parseFloat(e.getAttribute("data-xt-nav"));n<0?t.goToPrev({amount:-n}):t.goToNext({amount:n})}_eventMediaLoadedReinit(){this.reinit()}_eventVisibleReinit(){this.reinit()}_queueStart(){let{actionCurrent:e,actionOther:t,type:n,index:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options,a=o[`_queue${e}`][s];if(a&&a[n]&&!a[n].done){const s=o[`_queue${t}`],l=s[s.length-1];l&&l[n]&&!l[n].done||(o.initial||!i.queue?a[n].instant=!0:i.queue&&!i.queue[n]&&(a[n].instantType=!0),o._specialClassBody({actionCurrent:e,type:n}),o._queueDelay({actionCurrent:e,actionOther:t,obj:a,type:n}))}}_queueStop(){let{actionCurrent:e,actionOther:t,obj:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this;for(const i in n)if(n[i].done)for(const a of n[i].queueEls)s.Xt.frameDouble({el:a,ns:`${o.ns}CollapseHeightFrame`}),s.Xt.frameDouble({el:a,ns:`${o.ns}CollapseWidthFrame`}),clearTimeout(s.Xt.dataStorage.get(a,`${o.ns+i}DelayTimeout`)),clearTimeout(s.Xt.dataStorage.get(a,`${o.ns+i}AnimTimeout`)),o._queueDelayDone({actionCurrent:t,actionOther:e,obj:n,el:a,type:i,skipQueue:!0}),o._queueAnimDone({actionCurrent:t,actionOther:e,obj:n,el:a,type:i,skipQueue:!0})}_queueDelay(){let{actionCurrent:e,actionOther:t,obj:n,type:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this,a=i.options,l=n[o].queueEls;for(const c of l){var r;const u=null===(r=n[o].skipEls)||void 0===r?void 0:r.includes(c);let d=!i.initial&&!i.disabled&&s.Xt.delayTime({el:c,duration:a.delay||a[`delay${e}`],actionCurrent:e});if(d&&"function"==typeof d){d=d({current:s.Xt.dataStorage.get(c,`${i.ns+e}Count`)||l.findIndex((e=>e===c)),total:(s.Xt.dataStorage.get(c,`${i.ns+e}Tot`)||l.length)-1,el:c,self:i})}clearTimeout(s.Xt.dataStorage.get(c,`${i.ns+o}DelayTimeout`)),clearTimeout(s.Xt.dataStorage.get(c,`${i.ns+o}AnimTimeout`)),d?"raf"===d?s.Xt.frameDouble({el:c,ns:`${i.ns+o}QueueDelayDone`,func:()=>{i._queueDelayDone({actionCurrent:e,actionOther:t,obj:n,el:c,type:o,skipSame:u})}}):s.Xt.dataStorage.set(c,`${i.ns+o}DelayTimeout`,setTimeout((()=>{i._queueDelayDone({actionCurrent:e,actionOther:t,obj:n,el:c,type:o,skipSame:u})}),d)):i._queueDelayDone({actionCurrent:e,actionOther:t,obj:n,el:c,type:o,skipSame:u}),n[o].instant&&c===l[l.length-1]&&i._queueDone({actionCurrent:e,actionOther:t,obj:n,type:o})}l.length||i._queueDone({actionCurrent:e,actionOther:t,obj:n,type:o})}_queueDelayDone(){let{actionCurrent:e,actionOther:t,obj:n,el:o,type:i,skipSame:a,skipQueue:l=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this;if("In"===e&&(r._checkOnRunning({obj:n})||n.elements.force)?("elements"===i&&o===n.elements.queueEls[0]&&r._addCurrent({el:o,running:!0}),r._activate({el:o,type:i}),r._activateHash({obj:n,el:o,type:i}),r._specialZindex({actionCurrent:e,obj:n,el:o,type:i}),r._specialAppendto({actionCurrent:e,el:o,type:i}),r._specialClose({actionCurrent:e,el:o,type:i,obj:n}),r.initial?r._specialCollapse({actionCurrent:e,el:o,type:i,reset:!0}):r._specialCollapse({actionCurrent:e,el:o,type:i}),a||"elementsInner"===i||"targetsInner"===i||r.disabled||s.Xt.frame({el:o,ns:`${r.ns}${e}DelayDone`,func:()=>{o.dispatchEvent(new CustomEvent(`on.${r._componentNs}`,{detail:n.elements.e}))}})):"Out"===e&&(r._checkOffRunning({obj:n})||n.elements.force)&&("elements"===i&&o===n.elements.queueEls[0]&&(r._removeCurrent({el:o,running:!0}),r._getCurrents().length||(r.index=null,r._setDirection())),r._deactivate({el:o,type:i}),r._deactivateHash({obj:n,el:o,type:i}),r._specialCollapse({actionCurrent:e,el:o,type:i}),r._specialClose({actionCurrent:e,el:o,type:i,obj:n}),a||"elementsInner"===i||"targetsInner"===i||r.disabled||s.Xt.frame({el:o,ns:`${r.ns}${e}DelayDone`,func:()=>{o.dispatchEvent(new CustomEvent(`off.${r._componentNs}`,{detail:n.elements.e}))}})),!l&&(r.disabled?(s.Xt.frame({el:o,ns:`${r.ns+i}QueueAnim`}),r._queueAnim({actionCurrent:e,actionOther:t,obj:n,el:o,type:i,skipSame:a})):s.Xt.frame({el:o,ns:`${r.ns+i}QueueAnim`,func:()=>{r._queueAnim({actionCurrent:e,actionOther:t,obj:n,el:o,type:i,skipSame:a})}}),!n[i].instant&&n[i].instantType)){const s=n[i].queueEls;o===s[s.length-1]&&r._queueDone({actionCurrent:e,actionOther:t,obj:n,type:i})}}_queueAnim(){let{actionCurrent:e,actionOther:t,obj:n,el:o,type:i,skipSame:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const l=this,r=l.options,c=n[i].queueEls;let u=!l.initial&&!l.disabled&&s.Xt.animTime({el:o,duration:r.duration||r[`duration${e}`],actionCurrent:e});if(u&&"function"==typeof u){u=u({current:s.Xt.dataStorage.get(o,`${l.ns+e}Count`)||c.findIndex((e=>e===o)),total:(s.Xt.dataStorage.get(o,`${l.ns+e}Tot`)||c.length)-1,el:o,self:l})}clearTimeout(s.Xt.dataStorage.get(o,`${l.ns+i}AnimTimeout`)),u?"raf"===u?s.Xt.frameDouble({el:o,ns:`${l.ns+i}QueueAnimDone`,func:()=>{l._queueAnimDone({actionCurrent:e,actionOther:t,obj:n,el:o,type:i,skipSame:a})}}):s.Xt.dataStorage.set(o,`${l.ns+i}AnimTimeout`,setTimeout((()=>{l._queueAnimDone({actionCurrent:e,actionOther:t,obj:n,el:o,type:i,skipSame:a})}),u)):l._queueAnimDone({actionCurrent:e,actionOther:t,obj:n,el:o,type:i,skipSame:a})}_queueAnimDone(){let{actionCurrent:e,actionOther:t,obj:n,el:o,type:i,skipSame:a,skipQueue:l=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this;if("In"===e){if("elements"===i&&o===n.elements.queueEls[0]&&!r[`_queue${t}`].length)for(const e in n)r._specialZindex({actionCurrent:t,obj:n,type:e});r._activateDone({el:o,type:i}),r._specialCollapse({actionCurrent:e,el:o,type:i,reset:!0}),r._specialScrollto({actionCurrent:e,el:o,type:i,obj:n}),a||"elementsInner"===i||"targetsInner"===i||r.disabled||s.Xt.frame({el:o,ns:`${r.ns}${e}AnimDone`,func:()=>{o.dispatchEvent(new CustomEvent(`ondone.${r._componentNs}`,{detail:n.elements.e}))}})}else if("Out"===e){if("elements"===i&&o===n.elements.queueEls[0]&&!r._getCurrents().length)for(const t in n)r._specialZindex({actionCurrent:e,obj:n,type:t});r._deactivateDone({el:o,type:i}),r._specialAppendto({actionCurrent:e,el:o,type:i}),r._specialCollapse({actionCurrent:e,el:o,type:i,reset:!0}),a||"elementsInner"===i||"targetsInner"===i||r.disabled||s.Xt.frame({el:o,ns:`${r.ns}${e}AnimDone`,func:()=>{o.dispatchEvent(new CustomEvent(`offdone.${r._componentNs}`,{detail:n.elements.e}))}})}if(!l&&!n[i].instant&&!n[i].instantType){const s=n[i].queueEls;o===s[s.length-1]&&r._queueDone({actionCurrent:e,actionOther:t,obj:n,type:i})}}_queueDone(){let{actionCurrent:e,actionOther:t,obj:n,type:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this;if(n[s]){n[s].done=!0;let i=0;for(const e in n)n[e].done&&i++;if(i===Object.entries(n).length){for(const s in n)o._queueStart({actionCurrent:t,actionOther:e,type:s,index:o[`_queue${t}`].length-1});o[`_queue${e}`].pop(),o._queueComplete({actionCurrent:e,obj:n})}}}_queueComplete(){let{actionCurrent:e,obj:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this,i=n.options;if("In"===e){if(n.initial&&n.container.dispatchEvent(new CustomEvent(`setup.${n._componentNs}`)),s.Xt.perf({el:n.container,ns:`${n.ns}Init`,func:()=>{if(n.initial){n.container.setAttribute(`data-${n.componentName}-init`,""),n.container.dispatchEvent(new CustomEvent(`init.${n._componentNs}`)),n.initial=!1;for(const e in t)for(const s of t[e].queueEls)s.classList.remove(...n._classesInitial);i.debug&&console.debug(`${n.componentName} init`,n)}n._eventAutostart(),n._inverse=null}}),i.focusLimit&&!n._focusTrap){const e=n.targets.length?n.targets:n.elements;n._focusTrap=o.createFocusTrap(e,i.focusTrap),n._focusTrap.activate()}}else"Out"===e&&i.focusLimit&&n._focusTrap&&(n._focusTrap.deactivate(),n._focusTrap=null)}_specialZindex(){let{actionCurrent:e,obj:t,el:n,type:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options;if(o.targets.length||"elements"!==s||(s="targets"),i.zIndex&&i.zIndex[s])if("In"===e)o.zIndex=o.zIndex?o.zIndex:i.zIndex[s].start,o.zIndex=o.zIndex+i.zIndex[s].factor,n.style.zIndex=o.zIndex;else if("Out"===e&&(o.zIndex=i.zIndex[s].start,t[s]))for(const e of t[s].queueEls)e.style.zIndex=o.zIndex}_specialClassBody(){let{actionCurrent:e,type:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this,o=n.options;o.classBody&&("targets"===t||!n.targets.length&&"elements"===t)&&("In"===e?s.Xt.frame({el:n.container,ns:`${n.ns}ClassBodyFrame`,func:()=>{for(const e of o.classBody.split(" ")){s.Xt._classBody.add({c:e,ns:n.ns});document.documentElement.querySelector("body").classList.add(e)}}}):"Out"===e&&s.Xt.frame({el:n.container,ns:`${n.ns}ClassBodyFrame`,func:()=>{for(const e of o.classBody.split(" "))if(s.Xt._classBody.remove({c:e,ns:n.ns}),!s.Xt._classBody.get({c:e}).length){document.documentElement.querySelector("body").classList.remove(e)}}}))}_specialAppendto(){let{actionCurrent:e,el:t,type:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this,i=o.options;if(i.appendTo&&("targets"===n||!o.targets.length&&"elements"===n))if("In"===e){const e=document.querySelector(i.appendTo);document.querySelector(`[data-xt-origin="${o.ns}"]`)||t.before(s.Xt.node({str:`<div class="xt-ignore hidden" data-xt-origin="${o.ns}"></div>`})),e.append(t)}else if("Out"===e){const e=document.querySelector(`[data-xt-origin="${o.ns}"]`);e?(e.before(t),e.remove()):t.remove()}}_specialScrollto(){let{actionCurrent:e,obj:t,el:n,type:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this,a=i.options;if(a.scrollto&&"In"===e){const e=e=>{let{el:t}=e;if(!i.initial||a.scrolltoInit){const e=i.initial;s.Xt.ready({state:"complete",func:()=>{requestAnimationFrame((()=>{e&&(s.Xt.scrolltoHashforce=!0),t.dispatchEvent(new CustomEvent("scrollto.trigger.xt.scrollto"))}))}})}};if("string"==typeof a.scrollto){if(o===a.scrollto)e({el:n});else if("elements"===o&&n===t.elements.queueEls[0]){let t=i.container.querySelector(a.scrollto);t=t??document.querySelector(a.scrollto),t&&e({el:t})}}else"elements"===o&&n===t.elements.queueEls[0]&&e({el:i.container})}}_specialCollapse(){let{actionCurrent:e,el:t,type:n,reset:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this,a=i.options;if(a.collapseHeight)if("In"===e){if(a.collapseHeight===n)if(o)t.style.height="inherit",t.style.maxHeight="none",t.classList.add("xt-collapse-reset"),s.Xt.frameDouble({el:t,ns:`${i.ns}CollapseHeightFrame`});else{t.classList.remove("xt-collapse-reset"),t.style.height="auto",t.style.maxHeight="none";const e=t.offsetHeight;t.style.height="",t.style.maxHeight="";let n=t.offsetHeight;n=n===e?0:n,t.style.height=`${n}px`,t.style.maxHeight="none",s.Xt.frameDouble({el:t,ns:`${i.ns}CollapseHeightFrame`,func:()=>{t.style.height=`${e}px`}})}}else if("Out"===e&&a.collapseHeight===n)if(o)t.style.height="",t.style.maxHeight="",s.Xt.frameDouble({el:t,ns:`${i.ns}CollapseHeightFrame`});else{t.classList.remove("xt-collapse-reset");const e=t.offsetHeight;t.style.height="",t.style.maxHeight="";let n=t.offsetHeight;t.style.height="auto",t.style.maxHeight="none";const o=t.offsetHeight;n=o===n?0:n,t.style.height=`${e}px`,s.Xt.frameDouble({el:t,ns:`${i.ns}CollapseHeightFrame`,func:()=>{t.style.height=`${n}px`}})}if(a.collapseWidth)if("In"===e){if(a.collapseWidth===n)if(o)t.style.width="inherit",t.style.maxWidth="none",t.classList.add("xt-collapse-reset"),s.Xt.frameDouble({el:t,ns:`${i.ns}CollapseWidthFrame`});else{t.classList.remove("xt-collapse-reset"),t.style.width="auto",t.style.maxWidth="none";const e=t.offsetWidth;t.style.width="",t.style.maxWidth="";let n=t.offsetWidth;n=n===e?0:n,t.style.width=`${n}px`,t.style.maxWidth="none",s.Xt.frameDouble({el:t,ns:`${i.ns}CollapseWidthFrame`,func:()=>{t.style.width=`${e}px`}})}}else if("Out"===e&&a.collapseWidth===n)if(o)t.style.width="",t.style.maxWidth="",s.Xt.frameDouble({el:t,ns:`${i.ns}CollapseWidthFrame`});else{t.classList.remove("xt-collapse-reset");const e=t.offsetWidth;t.style.width="",t.style.maxWidth="";let n=t.offsetWidth;t.style.width="auto",t.style.maxWidth="none";const o=t.offsetWidth;n=o===n?0:n,t.style.width=`${e}px`,s.Xt.frameDouble({el:t,ns:`${i.ns}CollapseWidthFrame`,func:()=>{t.style.width=`${n}px`}})}}_specialClose(){let{actionCurrent:e,el:t,type:n,obj:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this,a=i.options;if("In"===e){if(a.closeInside&&("elements"===n||"targets"===n)){const e=t,n=s.Xt.dataStorage.put(e,`click/close/${i.ns}`,i._eventSpecialcloseinsideHandler.bind(i));requestAnimationFrame((()=>{e.removeEventListener("click",n),e.addEventListener("click",n)}))}if(a.closeOutside&&"elements"===n&&t===o.elements.queueEls[0]){const e=document.querySelectorAll(a.closeOutside);for(const t of e){const e=s.Xt.dataStorage.put(t,`mousedown/close/${i.ns}`,i._eventSpecialcloseoutsideHandler.bind(i));requestAnimationFrame((()=>{t.removeEventListener("mousedown",e),t.addEventListener("mousedown",e)}))}}if(a.closeDeep&&("targets"===n||!i.targets.length&&"elements"===n)){const e=t.querySelectorAll(a.closeDeep);for(const t of e){const e=s.Xt.dataStorage.put(t,`click/close/${i.ns}`,i._eventSpecialclosedeepHandler.bind(i));requestAnimationFrame((()=>{t.removeEventListener("click",e),t.addEventListener("click",e)}));const n=s.Xt.dataStorage.put(t,`keydown/close/${i.ns}`,i._eventSpecialclosedeepKeydownHandler.bind(i).bind(i,{closeElement:t}));requestAnimationFrame((()=>{t.addEventListener("keydown",n),t.setAttribute("tabindex","0"),t.setAttribute("role","button")}))}}}else if("Out"===e){if(a.closeInside&&("elements"===n||"targets"===n)){const e=t,n=s.Xt.dataStorage.get(e,`click/close/${i.ns}`);e.removeEventListener("click",n)}if(a.closeOutside&&"elements"===n&&t===o.elements.queueEls[0]){const e=document.querySelectorAll(a.closeOutside);for(const t of e){const e=s.Xt.dataStorage.get(t,`mousedown/close/${i.ns}`);t.removeEventListener("mousedown",e)}}if(a.closeDeep&&("targets"===n||!i.targets.length&&"elements"===n)){const e=t.querySelectorAll(a.closeDeep);for(const t of e){const e=s.Xt.dataStorage.get(t,`click/close/${i.ns}`);t.removeEventListener("click",e);const n=s.Xt.dataStorage.get(t,`keydown/close/${i.ns}`);t.removeEventListener("keydown",n),t.removeAttribute("tabindex"),t.removeAttribute("role")}}}}_eventSpecialcloseinsideHandler(e){const t=this,n=t.options;if(e.target.matches(n.closeInside)){const e=t._getCurrents();for(const n of e)t._eventOff({el:n,force:!0})}}_eventSpecialcloseoutsideHandler(e){const t=this;if(!s.Xt.contains({els:[...t.elements,...t.targets],tr:e.target})){const e=t._getCurrents();for(const n of e)t._eventOff({el:n,force:!0})}}_eventSpecialclosedeepHandler(e){const t=this;if(s.Xt.contains({els:[...t.elements,...t.targets],tr:e.target})){const e=t._getCurrents();for(const n of e)t._eventOff({el:n,force:!0})}}_eventSpecialclosedeepKeydownHandler(e,t){let{closeElement:n}=e;const s=t.key;"Enter"!==s&&" "!==s||(t.preventDefault(),n.dispatchEvent(new CustomEvent("click")))}getNextIndex(){let{index:e=!1,amount:t=1,loop:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this;return!1!==e?e+=t:e=null!==s.index?s.index+t:0,s.getNumIndex({index:e,loop:n})}getNext(){let{amount:e=1,loop:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getNextIndex({amount:e,loop:t});return this.getElementsGroups()[n]}goToNext(){let{amount:e=1,force:t=!1,loop:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this;s._inverse=!1;const o=s.getNextIndex({amount:e,loop:n});return s.goToNum({index:o,force:t,loop:n})}getPrevIndex(){let{index:e=!1,amount:t=1,loop:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this;return!1!==e?e-=t:e=null!==s.index?s.index-t:s.getElementsGroups().length-1,s.getNumIndex({index:e,loop:n})}getPrev(){let{amount:e=1,loop:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getPrevIndex({amount:e,loop:t});return this.getElementsGroups()[n]}goToPrev(){let{amount:e=1,force:t=!1,loop:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this;s._inverse=!0;const o=s.getPrevIndex({amount:e,loop:n});return s.goToNum({index:o,force:t,loop:n})}getNumIndex(){let{index:e,loop:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this,s=n.options,o=n.getElementsGroups().length-1;return 0===o?e=null:e>o?t||null===t&&(s.loop||n._wrap)?(e=e-o-1,e=e>o?o:e):e=null:e<0&&(t||null==t&&(s.loop||n._wrap)?(e=e+o+1,e=e<0?0:e):e=null),e}getNum(){let{index:e=1,loop:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getNumIndex({index:e,loop:t});return this.getElementsGroups()[n]}goToNum(){let{index:e,force:t=!1,loop:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this,o=s.getNum({index:e,loop:n});return o&&s._eventOn({el:o,force:t}),o}enable(){const e=this;if(e.disabled){e.disabled=!1,e.container.removeAttribute(`data-${e.componentName}-disabled`);for(const t of e.elements)t.removeAttribute(`data-${e.componentName}-disabled`);for(const t of e.targets)t.removeAttribute(`data-${e.componentName}-disabled`);e.container.dispatchEvent(new CustomEvent(`status.${e._componentNs}`))}}disable(){let{skipEvent:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options;if(!t.disabled){if(t.disabled=!0,n.disableDeactivate)for(const e of t.elements.filter((e=>t.hasCurrent({el:e}))))t._eventOff({el:e,force:!0});t.container.setAttribute(`data-${t.componentName}-disabled`,"");for(const e of t.elements)e.setAttribute(`data-${t.componentName}-disabled`,"");for(const e of t.targets)e.setAttribute(`data-${t.componentName}-disabled`,"");if(n.jump)for(const e of t.targets)e.classList.remove("xt-jump");t._observer&&(t._observer.disconnect(),t._observer=null),clearTimeout(s.Xt.dataStorage.get(t.container,`${t.ns}AutoTimeout`)),e||t.container.dispatchEvent(new CustomEvent(`status.${t._componentNs}`))}}_initA11y(){const e=this;if(e.options.a11y){let t=e.elements,n=e.targets;e.targets.length||(t=[],n=e.elements),e._hasContainer="unique"!==e._mode&&!e.elements.includes(e.container),e._initA11yRole({els:t,trs:n}),e._initA11yId({els:t,trs:n}),e._initA11ySetup(),e._initA11yAuto(),e._initA11yChange(),e._initA11yStatus({els:t}),e._initA11yKeyboard({els:e.elements})}}_initA11yRole(){let{els:e,trs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this,s=n.options;if(s.a11y.role){let o=!1;if(s.a11y.vertical&&n._hasContainer&&n.container.setAttribute("aria-orientation","vertical"),"popup"===s.a11y.role)for(const t of e)t.setAttribute("aria-haspopup",!0);else if("dialog"===s.a11y.role){for(const t of e)t.setAttribute("aria-haspopup","dialog");for(const e of t)e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true")}else if("tooltip"===s.a11y.role)for(const e of t)e.setAttribute("role","tooltip");else if("carousel"===s.a11y.role&&n._hasContainer){n.container.setAttribute("role","group"),n.container.setAttribute("aria-roledescription","carousel");for(const e of t)e.setAttribute("role","group"),e.setAttribute("aria-roledescription","slide")}else if("tablist"===s.a11y.role&&n._hasContainer&&n.targets.length){o=!0,n.container.setAttribute("role","tablist");for(const t of e)t.setAttribute("role","tab");for(const e of t)e.setAttribute("role","tabpanel")}else if("menu"===s.a11y.role&&n._hasContainer&&n.targets.length){n.container.setAttribute("role","menu");for(const t of e)t.setAttribute("role","menuitem");for(const e of t)e.setAttribute("role","menu")}else if("listbox"===s.a11y.role&&n._hasContainer&&n.targets.length){o=!0,n.container.setAttribute("role","listbox");for(const t of e)t.setAttribute("role","option")}o&&s.max>1&&n.container.setAttribute("aria-multiselectable","true")}}_initA11yId(){let{els:e,trs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.options;if(this.targets.length){if(n.a11y.labelElements||n.a11y.controls)for(const e of t){e.getAttribute("id")||e.setAttribute("id",s.Xt.uniqueId())}if(n.a11y.labelTargets)for(const t of e){t.getAttribute("id")||t.setAttribute("id",s.Xt.uniqueId())}}}_initA11ySetup(){const e=this,t=e.options;if(e.targets.length){if(t.a11y.labelElements||t.a11y.controls)for(const n of e.elements){const s=e.getTargets({el:n});let o="";for(const e of s)o+=`${e.getAttribute("id")} `;t.a11y.labelElements&&(n.setAttribute("aria-labelledby",o.trim()),n.removeAttribute("aria-label")),t.a11y.controls&&n.setAttribute("aria-controls",o.trim())}if(t.a11y.labelTargets)for(const t of e.targets)if(!t.getAttribute("aria-label")){const n=e.getElements({el:t});let s="";for(const e of n)s+=`${e.getAttribute("id")} `;t.setAttribute("aria-labelledby",s.trim())}}}_initA11yChange(){const e=this,t=e.options;if(t.a11y.selected||t.a11y.expanded){if(t.a11y.expanded)for(const t of e.targets)t.setAttribute("aria-expanded","false");for(const n of e.elements){t.a11y.selected&&e._hasContainer&&e.targets.length&&n.setAttribute("aria-selected","false");const o=s.Xt.dataStorage.put(n,`on.${e._componentNs}/ariaselected/${e.ns}`,e._eventA11yChangeOn.bind(e).bind(e,{el:n}));n.addEventListener(`on.${e._componentNs}`,o);const i=s.Xt.dataStorage.put(n,`off.${e._componentNs}/ariaselected/${e.ns}`,e._eventA11yChangeOff.bind(e).bind(e,{el:n}));n.addEventListener(`off.${e._componentNs}`,i)}}}_eventA11yChangeOn(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options;if(n.a11y.expanded){const n=t.getTargets({el:e});for(const e of n)e.setAttribute("aria-expanded","true")}n.a11y.selected&&t._hasContainer&&t.targets.length&&e.setAttribute("aria-selected","true")}_eventA11yChangeOff(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options;if(n.a11y.expanded){const n=t.getTargets({el:e});for(const e of n)e.setAttribute("aria-expanded","false")}n.a11y.selected&&t._hasContainer&&t.targets.length&&e.setAttribute("aria-selected","false")}_initA11yAuto(){const e=this,t=e.options;if(t.auto&&t.auto.time&&t.a11y.live){const t=e.container;t.setAttribute("aria-live","polite");const n=s.Xt.dataStorage.put(t,`autostart.${e._componentNs}/arialive/${e.ns}`,e._eventA11yAutostart.bind(e).bind(e,{container:t}));t.addEventListener(`autostart.${e._componentNs}`,n);const o=s.Xt.dataStorage.put(t,`autostop.${e._componentNs}/arialive/${e.ns}`,e._eventA11yAutostop.bind(e).bind(e,{container:t}));t.addEventListener(`autostop.${e._componentNs}`,o)}}_eventA11yAutostart(){let{container:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setAttribute("aria-live","off")}_eventA11yAutostop(){let{container:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setAttribute("aria-live","polite")}_initA11yStatus(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;if(t.options.a11y.disabled){const n=t.container,o=s.Xt.dataStorage.put(n,`status.${t._componentNs}/ariastatus/${t.ns}`,t._eventA11yStatus.bind(t).bind(t,{els:e}));n.addEventListener(`status.${t._componentNs}`,o)}}_eventA11yStatus(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;for(const n of e)t.disabled?n.setAttribute("aria-disabled","true"):n.removeAttribute("aria-disabled")}_initA11yKeyboard(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;if(t.options.a11y.keyboard)for(const n of e){const e=s.Xt.dataStorage.put(n,`on.${t._componentNs}/ariakeyboard/${t.ns}`,t._eventA11yOn.bind(t).bind(t,{el:n}));n.addEventListener(`on.${t._componentNs}`,e);const o=s.Xt.dataStorage.put(n,`off.${t._componentNs}/ariakeyboard/${t.ns}`,t._eventA11yOff.bind(t).bind(t,{el:n}));n.addEventListener(`off.${t._componentNs}`,o)}}_eventA11yOn(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options,o=s.Xt.dataStorage.put(e,`keydown/ariakeyboard/${t.ns}`,t._eventA11yKeydown.bind(t));if(e.addEventListener("keydown",o,{passive:!1}),"popup"===n.a11y.role||"dialog"===n.a11y.role||n.a11y.items){const n=s.Xt.dataStorage.put(document,`keydown/ariakeyboard/document/${t.ns}`,t._eventA11yDocumentKeydown.bind(t).bind(t,{el:e}));document.removeEventListener("keydown",n),document.addEventListener("keydown",n)}}_eventA11yOff(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=s.Xt.dataStorage.get(e,`keydown/ariakeyboard/${this.ns}`);e.removeEventListener("keydown",t);const n=s.Xt.dataStorage.get(e,`keydown/ariakeyboard/document/${this.ns}`);document.removeEventListener("keydown",n)}_eventA11yKeydown(e){const t=this,n=t.options;if(t.disabled)return;const s=e.key,o=n.a11y.vertical?"ArrowUp":"ArrowLeft",i=n.a11y.vertical?"ArrowDown":"ArrowRight";let a;return n.a11y.vertical,s===o?a=t.getPrev():s===i&&(a=t.getNext()),a?(t._eventOn({el:a,focus:!0}),void e.preventDefault()):void 0}_eventA11yDocumentKeydown(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=this,o=n.options;if(n.disabled)return;const i=t.key,a=o.a11y.vertical?"ArrowLeft":"ArrowUp",l=o.a11y.vertical?"ArrowRight":"ArrowDown";if("Escape"!==i||"popup"!==o.a11y.role&&"dialog"!==o.a11y.role){if(o.a11y.items){let e;const r=[],c=n.targets.filter((e=>n.hasCurrent({el:e})));for(const e of c)r.push(...e.querySelectorAll(o.a11y.items));if(r.length){const o=r.indexOf(document.activeElement);if(i===a){if(-1===o)e=r[r.length-1];else{e=r[(o-1+r.length)%r.length]}t.preventDefault()}else if(i===l){if(-1===o)e=r[0];else{e=r[(o+1)%r.length]}t.preventDefault()}else{n._search=n._search+t.key.toLowerCase();const o=r.filter((e=>{var t;return null===(t=e.innerText)||void 0===t?void 0:t.toLowerCase().startsWith(n._search)}));o.length&&(e=o[0]),clearTimeout(s.Xt.dataStorage.get(document,`${n.ns}SearchTimeout`)),s.Xt.dataStorage.set(document,`${n.ns}SearchTimeout`,setTimeout((()=>{n._search=""}),500))}if(e)return void e.focus()}}}else n._eventOff({el:e,focus:!0})}reinit(){let{save:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;if(t.options.disableDeactivate)for(const e of t.targets.filter((e=>t.hasCurrent({el:e}))))t._specialAppendto({actionCurrent:"Out",el:e,type:"targets"});t._initLogic({save:e})}restart(){const e=this;e._initStart(),e.container.dispatchEvent(new CustomEvent(`restart.${e._componentNs}`))}_addNamespace(){const e=this;if("unique"===e._mode){const t=s.Xt.dataStorage.get(document.documentElement,`xtNamespace${e.ns}`)??[];t.includes(e)||(t.push(e),s.Xt.dataStorage.set(document.documentElement,`xtNamespace${e.ns}`,t))}}_removeNamespace(){const e=this;if("unique"===e._mode){let t=s.Xt.dataStorage.get(document.documentElement,`xtNamespace${e.ns}`);t&&(t=t.filter((t=>t!==e)),s.Xt.dataStorage.set(document.documentElement,`xtNamespace${e.ns}`,t))}}_removeEvents(){const e=this;for(const t of e._destroyElements){const n=s.Xt.dataStorage.getAll(t);if(n)for(const[o]of n)if(o&&o.endsWith(e.ns)){const e=s.Xt.dataStorage.get(t,o);if("function"==typeof e){const n=o.split("/")[0].split(" ");for(const s of n)t.removeEventListener(s,e),t.removeEventListener(s,e,!0);s.Xt.dataStorage.remove(t,o)}}}}destroy(){let{weak:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;t.disable({skipEvent:!0}),s.Xt._removeMatches({self:t,optionsInitial:t._optionsInitial}),t._removeEvents(),t._removeNamespace(),t._destroyElements=[],e||(t.container.removeAttribute(`data-${t.componentName}-init`),s.Xt._remove({name:t.componentName,el:t.container}),t.container.dispatchEvent(new CustomEvent(`destroy.${t._componentNs}`)))}}}}]);
//# sourceMappingURL=615.min.js.map