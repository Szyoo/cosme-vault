/*! For license information please see 508.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkxtendui=globalThis.webpackChunkxtendui||[]).push([[508],{4075:(e,t,n)=>{var o=n(3489),r=n(3515),i=n(6772)("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[i])?!!t:"RegExp"===r(e))}},635:(e,t,n)=>{var o=n(2486),r=n(6072),i=n(7948),s=n(5578),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||r(e,"flags")||!i(a,e)?t:o(s,e)}},1082:(e,t,n)=>{var o=n(7522),r=n(7263),i=n(6772),s=n(2667),a=i("species");e.exports=function(e){var t=o(e);s&&t&&!t[a]&&r(t,a,{configurable:!0,get:function(){return this}})}},1031:e=>{var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},7563:(e,t,n)=>{var o=n(2667),r=n(2750),i=n(1671),s=n(3859),a=n(2952),l=n(2398),c=n(4455),u=n(5719).f,p=n(7948),f=n(4075),d=n(2148),g=n(635),h=n(770),m=n(5241),v=n(579),_=n(560),b=n(6072),y=n(1528).enforce,S=n(1082),w=n(6772),x=n(4658),E=n(63),A=w("match"),C=r.RegExp,$=C.prototype,R=r.SyntaxError,L=i($.exec),T=i("".charAt),N=i("".replace),q=i("".indexOf),X=i("".slice),k=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,P=/a/g,U=/a/g,D=new C(P)!==P,I=h.MISSED_STICKY,M=h.UNSUPPORTED_Y,F=o&&(!D||I||x||E||_((function(){return U[A]=!1,C(P)!==P||C(U)===U||"/a/i"!==String(C(P,"i"))})));if(s("RegExp",F)){for(var H=function(e,t){var n,o,r,i,s,u,h=p($,this),m=f(e),v=void 0===t,_=[],S=e;if(!h&&m&&v&&e.constructor===H)return e;if((m||p($,e))&&(e=e.source,v&&(t=g(S))),e=void 0===e?"":d(e),t=void 0===t?"":d(t),S=e,x&&"dotAll"in P&&(o=!!t&&q(t,"s")>-1)&&(t=N(t,/s/g,"")),n=t,I&&"sticky"in P&&(r=!!t&&q(t,"y")>-1)&&M&&(t=N(t,/y/g,"")),E&&(i=function(e){for(var t,n=e.length,o=0,r="",i=[],s=c(null),a=!1,l=!1,u=0,p="";o<=n;o++){if("\\"===(t=T(e,o)))t+=T(e,++o);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:L(k,X(e,o+1))&&(o+=2,l=!0),r+=t,u++;continue;case">"===t&&l:if(""===p||b(s,p))throw new R("Invalid capture group name");s[p]=!0,i[i.length]=[p,u],l=!1,p="";continue}l?p+=t:r+=t}return[r,i]}(e),e=i[0],_=i[1]),s=a(C(e,t),h?this:$,H),(o||r||_.length)&&(u=y(s),o&&(u.dotAll=!0,u.raw=H(function(e){for(var t,n=e.length,o=0,r="",i=!1;o<=n;o++)"\\"!==(t=T(e,o))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),r+=t):r+="[\\s\\S]":r+=t+T(e,++o);return r}(e),n)),r&&(u.sticky=!0),_.length&&(u.groups=_)),e!==S)try{l(s,"source",""===S?"(?:)":S)}catch(e){}return s},O=u(C),z=0;O.length>z;)m(H,C,O[z++]);$.constructor=H,H.prototype=$,v(r,"RegExp",H,{constructor:!0})}S("RegExp")},2001:(e,t,n)=>{var o=n(2667),r=n(4658),i=n(3515),s=n(7263),a=n(1528).get,l=RegExp.prototype,c=TypeError;o&&r&&s(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!a(this).dotAll;throw new c("Incompatible receiver, RegExp required")}}})},726:(e,t,n)=>{var o=n(579),r=n(1671),i=n(2148),s=n(1031),a=URLSearchParams,l=a.prototype,c=r(l.append),u=r(l.delete),p=r(l.forEach),f=r([].push),d=new a("a=1&a=2&b=3");d.delete("a",1),d.delete("b",void 0),d+""!="a=2"&&o(l,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var o=[];p(this,(function(e,t){f(o,{key:t,value:e})})),s(t,1);for(var r,a=i(e),l=i(n),d=0,g=0,h=!1,m=o.length;d<m;)r=o[d++],h||r.key===a?(h=!0,u(this,r.key)):g++;for(;g<m;)(r=o[g++]).key===a&&r.value===l||c(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},2765:(e,t,n)=>{var o=n(579),r=n(1671),i=n(2148),s=n(1031),a=URLSearchParams,l=a.prototype,c=r(l.getAll),u=r(l.has),p=new a("a=1");!p.has("a",2)&&p.has("a",void 0)||o(l,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var o=c(this,e);s(t,1);for(var r=i(n),a=0;a<o.length;)if(o[a++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},3312:(e,t,n)=>{var o=n(2667),r=n(1671),i=n(7263),s=URLSearchParams.prototype,a=r(s.forEach);o&&!("size"in s)&&i(s,"size",{get:function(){var e=0;return a(this,(function(){e++})),e},configurable:!0,enumerable:!0})},8508:(e,t,n)=>{n.r(t),n.d(t,{InfinitescrollInit:()=>r});n(7563),n(2001),n(1034),n(2399),n(726),n(2765),n(3312);var o=n(631);class r{_init(){this._initVars(),this._initLogic()}_initVars(){const e=this;e._optionsDefault=o.Xt.merge([e.constructor.optionsDefault,o.Xt.options[e.componentName]]),e._optionsInitial=e.options=o.Xt.merge([e._optionsDefault,e._optionsCustom]);const t=e.options;e.current=Math.floor(t.min/t.perPage),t.get||(e._itemsFake=e.container.querySelector(t.elements.itemsContainer).cloneNode(!0))}_initLogic(){var e;const t=this,n=t.options;if(t.ns=t.ns??o.Xt.uniqueId(),t.enable(),o.Xt._initMatches({self:t,optionsInitial:t._optionsInitial}),t.initial=!0,t.scrollUp=t.container.querySelectorAll(n.elements.scrollUp),t.scrollDown=t.container.querySelectorAll(n.elements.scrollDown),t.itemsContainer=t.container.querySelector(n.elements.itemsContainer),t.spaceAdditionals=t.container.querySelectorAll(n.elements.spaceAdditional),t.paginations=t.container.querySelectorAll(n.elements.pagination),n.nocache){const e=o.Xt.dataStorage.put(window,`beforeunload/${t.ns}`,t._eventBeforeunload.bind(t));addEventListener("beforeunload",e)}const r=o.Xt.dataStorage.put(window,`scroll/${t.ns}`,t._eventScroll.bind(t));addEventListener("scroll",r);const i=null!==(e=n.events)&&void 0!==e&&e.on?n.events.on.split(" "):[];if(i.length)for(const e of[...Array.from(t.scrollUp),...Array.from(t.scrollDown)]){const r=o.Xt.dataStorage.put(e,`${n.events.on}/${t.ns}`,t._eventTrigger.bind(t,{trigger:e}));for(const t of i)e.addEventListener(t,r)}t._initStart(),t.container.dispatchEvent(new CustomEvent(`setup.${t._componentNs}`)),o.Xt.frameDouble({el:t.container,func:()=>{t.container.setAttribute(`data-${t.componentName}-init`,""),t.container.dispatchEvent(new CustomEvent(`init.${t._componentNs}`)),t.initial=!1,n.debug&&console.debug(`${t.componentName} init`,t)},ns:`${t.ns}Init`}),t.options.disabled&&t.disable()}_initStart(){const e=this,t=e.options;if(!e.disabled){if(e._setCurrent(),e._update(),e._paginate(),e._prefetch(),e.itemsContainer){const n=e.itemsContainer.querySelector(t.elements.item);n&&n.setAttribute("data-item-first",e.current)}if(t.nocache){const n=e._additionalSpace(),r=history.state;r&&r[`scrollResume${e._componentNs}`]&&o.Xt.ready({state:"complete",func:()=>{requestAnimationFrame((()=>{const o=e.itemsContainer.querySelector(t.elements.item);document.scrollingElement.scrollTop=r[`scrollResume${e._componentNs}`]+o.offsetTop+n}))}})}}}_eventTrigger(){let{trigger:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options;if(t.disabled)return;const o=parseFloat(e.getAttribute("data-xt-infinitescroll-up")),r=parseFloat(e.getAttribute("data-xt-infinitescroll-down")),i=o||r;if(i){const n=t._getNext({amount:i}),r=t.itemsContainer.querySelectorAll(`[data-item-first="${n}"]`);n===t.current||r.length||(t._setCurrent({page:n}),t.inverse=!!o,t.container.classList.contains("xt-infinitescroll-loading")||(t.container.classList.add("xt-infinitescroll-loading"),t._request(),t._prefetch({trigger:e})))}else t._setCurrent({page:Math.floor(n.min/n.perPage)}),location=t._url.href}_getNext(){let{amount:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.options;let n=this.current+e;const o=Math.floor(t.min/t.perPage),r=Math.ceil(t.max/t.perPage);return n=n<o?o:n,n=n>r?r:n,n}_eventBeforeunload(){const e=this;if(!e.disabled&&e._scrollResume){const t={};t[`scrollResume${e._componentNs}`]=e._scrollResume,history.replaceState(t,"",e._url.href)}}_eventScroll(){var e;const t=this,n=t.options;if(t.disabled||t._loading)return;const r=document.scrollingElement.scrollTop,i=window.innerHeight,s=Array.from(t.itemsContainer.querySelectorAll("[data-item-first]")).reverse();let a=s[s.length-1];for(const e of s){if(e.getBoundingClientRect().top<i/2){a=e;break}}if(t._setCurrent({page:parseFloat(a.getAttribute("data-item-first"))}),t._paginate(),n.nocache){const e=t._additionalSpace();t._scrollResume=r-a.offsetTop-e}const l=t._url.origin||`${t._url.protocol}//${t._url.host}`;l===location.origin?t._url.href!==location.href&&history.replaceState(null,"",t._url.href):console.error("Error: Xt.Infinitescroll cannot set history with different origin",l);if((null!==(e=n.events)&&void 0!==e&&e.on?n.events.on.split(" "):[]).length){if(n.events.scrollUp&&t._scrollTopOld>r)for(const e of t.scrollUp){if(r<e.offsetTop){o.Xt.dataStorage.get(e,`${n.events.on}/${t.ns}`)({target:e})}}if(n.events.scrollDown&&t._scrollTopOld<=r)for(const e of t.scrollDown){if(r+i>e.offsetTop+e.offsetHeight){o.Xt.dataStorage.get(e,`${n.events.on}/${t.ns}`)({target:e})}}}t._scrollTopOld=r}_request(){const e=this;e._loading=!0,fetch(e._url.href,{method:"GET"}).then((e=>e.ok?e.text():Promise.reject(e))).then((t=>{e._success({text:t})})).catch((()=>{e._error()}))}_success(){let{text:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options,o=document.createElement("html");o.innerHTML=e,t.loadedHtml=o;const r=o.querySelector(n.elements.itemsContainer);n.get&&r?(t._loading=!1,t._populate({itemsContainer:r})):setTimeout((()=>{t._loading=!1,t._populate({itemsContainer:t._itemsFake.cloneNode(!0)})}),1e3)}_error(){this._loading=!1,this.container.classList.remove("xt-infinitescroll-loading")}_populate(){let{itemsContainer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options,r=e.querySelectorAll(n.elements.item);let i;r[0].setAttribute("data-item-first",t.current);const s=t.itemsContainer.querySelectorAll(`${n.elements.item}`);for(const e of r)if(t.inverse){s[0].before(e)}else{const o=t.itemsContainer.querySelectorAll(`${n.elements.item}`);i=o[o.length-1],i.after(e)}t.container.classList.remove("xt-infinitescroll-loading"),t._update(),t._paginate(),t._eventScroll(),o.Xt.frame({el:t.container,ns:`${t.ns}Populate`,func:()=>{t.container.dispatchEvent(new CustomEvent(`populate.${t._componentNs}`))}})}_paginate(){const e=this,t=e.options;for(const n of e.paginations)if(!n.dataset.current||e.current>parseFloat(n.dataset.current)){n.dataset.current=e.current,n.dataset.html=n.dataset.html?n.dataset.html:n.innerHTML;let r=n.dataset.html,i=new RegExp("xt-num","ig");if(-1!==r.search(i)){let n=e.current*t.perPage;n=n>t.max?t.max:n,r=r.replace(i,n)}i=new RegExp("xt-tot","ig"),-1!==r.search(i)&&(r=r.replace(i,t.max)),n.innerHTML=o.Xt.sanitize(r)}}_update(){const e=this,t=e.options;e.current<=Math.floor(t.min/t.perPage)&&e.container.classList.add("xt-infinitescroll-first"),e.current>=Math.ceil(t.max/t.perPage)&&e.container.classList.add("xt-infinitescroll-last")}enable(){const e=this;e.disabled&&(e.disabled=!1,e.container.dispatchEvent(new CustomEvent(`status.${e._componentNs}`)))}disable(){let{skipEvent:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;t.disabled||(t.disabled=!0,e||t.container.dispatchEvent(new CustomEvent(`status.${t._componentNs}`)))}_additionalSpace(){const e=this;let t=0;for(const n of e.spaceAdditionals)t+=n.offsetHeight;return t}_setCurrent(){let{page:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options,o=new URL(location.href),r=new URLSearchParams(o.search),i=r.get(n.get);t.current=null!==e?e:i?parseFloat(i):t.current,r.set(n.get,t.current),o.search=r.toString(),t._url=o}_prefetch(){let{trigger:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this,n=t.options;if(n.prefetch){const o=e?[e]:[...Array.from(t.scrollUp),...Array.from(t.scrollDown)];for(const e of o){const o=parseFloat(e.getAttribute("data-xt-infinitescroll-up")),r=parseFloat(e.getAttribute("data-xt-infinitescroll-down")),i=o||r,s=new URL(location.href),a=new URLSearchParams(s.search),l=t._getNext({amount:i});if(t.current!==l){a.set(n.get,l),s.search=a.toString();const e=document.createElement("link");e.rel="prefetch",e.href=s,e.as="fetch",document.head.appendChild(e)}}}}reinit(){this._initLogic()}destroy(){const e=this,t=e.options;if(t.nocache){const t=o.Xt.dataStorage.get(window,`beforeunload/${e.ns}`);removeEventListener("beforeunload",t)}const n=o.Xt.dataStorage.get(window,`scroll/${e.ns}`);removeEventListener("scroll",n);for(const n of[...Array.from(e.scrollUp),...Array.from(e.scrollDown)]){const r=o.Xt.dataStorage.get(n,`${t.events.on}/${e.ns}`);n.removeEventListener(t.events.on,r)}e.container.removeAttribute(`data-${e.componentName}-init`),o.Xt._remove({name:e.componentName,el:e.container}),e.container.dispatchEvent(new CustomEvent(`destroy.${e._componentNs}`))}}}}]);
//# sourceMappingURL=508.min.js.map